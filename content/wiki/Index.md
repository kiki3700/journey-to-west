---
title: Index
slug: "index"
---
## 개념
* 기본 구조: 일반적으로 `B 트리`나 `Hash` 구조를 사용하여 구현된다. 이러한 구조는 조회 성능을 높이는데 사용된다. 
* 키와 값: 인덱스는 키와 해당 키가 가르키는 값(레코드 위치)로 구성되어 있다.

## 장단점
### 장점
1. 빠른 검색 속도: 조회 성능이 크게 향상되는데, 위의 설명과 같이 해당 키가 가르키는 레코드 위치를 저장하고 있기 때문이다.
2. 정렬과 그룹화 최적화: 인덱스 사용시 `ORDER BY`, `GROUP BY` 와 같은 연산이 더 효율 적으로 수행된다.
3. 중복 방지: 유니크 인덱스를 사용하면 특정 컬럼값이 중복되지 않도록 보장할 수 있다.
### 단점
1. 추가 저장공간: 인덱스를 위한 추가 저장공간이 필요하다.
2. 쓰기, 수정, 삭제 성능 저하: 쓰기, 수정, 삭제 연산을 진행할 때, 인덱스에도 추가 작업을 해야되기 때문에 성능이 저하될 수 있다.
3. 복잡성 증가: 너무 많은 인덱스를 사용하면 인덱스 관리가 복잡해지고, 오히려 성능이 저하된다.
## 인덱스 종류
1. 단일 열 인덱스(Single Column Index): 하나의 컬럼에 대해 생성되는 인덱스
2. 복합 인덱스(Composite Index): 두 개 이상의 컬럼에 대해 생성되는 인덱스
3. 유니크 인덱스(Unique Index): 인덱스가 생성된 컬럼에 대해 중복값을 허용하지 않는 인덱스
4. 풀 텍스트 인덱스(Full Text Index): 텍스트 검색을 효율적으로 수행하기 위해 사용되는 인덱스
5. 클러스터형 인덱스(Clustered Index): 테이블의 데이터가 인덱스에 따라 물리적으로 정렬되어 저장, 하나의 테이블에 하나의 클러스터형 인덱스만 존재
6. 비클러스터형 인덱스(Non-clustered Index):별도의 데이터 구조를 사용하여 인덱스 정보 저장, 인덱스는 데이터에 대한 포인터 역할을 한다. 하나의 테이블에 다수의 비클러스터형 인덱스 사용가능 
## 인덱스 구조
### 1. B-트리 구조
#### 특징
* **균형 트리**: 모든 리프노드가 같은 깊이에 위치하며, 트리의 깊이가 일정하게 유지된다. 탐색, 삽입, 삭제 작업의 시간 복잡도는 O(log n)이다.
* **다수의 자식 노드**: 하나의 노드는 여러개의 자식 노드를 가질 수 있어, 데이터베이스 인덱스에 사용하는 큰 데이터 페이지를 처리하는데 유리
#### 동작 방식:
* 각 노드에 데이터 값과 포이터가 저장, 데이터 값은 해당 범위에 맞는 자식노드를 가리키는 포인터와 연결
* 데이터 검색시 루트 노드에서 시작하여 값의 범위를 확인하고, 하향식으로 진행, 데이터가 정렬된 상태로 저장되므로 탐색이 빠르다.
* 삽입 및 삭제 작업이 이뤄질때 트리의 균형이 깨지지 않도록, 추가 작업을 진행
### 2. B+트리 구조
* B-트리의 변형으로 데이터베이스 인덱스에서 가장 많이 사용되는구조
#### 특징
* **리프 노드에 모든 데이터 저장**: 모든 실제 데이터가 리프노드에 저장되고, 내부 노드에는 오직 인덱스 값만 저장. 리프 노드들은 양방향 연결 리스트로 연결되어 있어, 순차적인 데이터 탐색에 유리
* **빠른 범위 탐색**: 리프 노드가 순서대로 연겨로디어 있으므로 범위 쿼리를 빠르게 처리할 수 있다.
* **트리의 깊이 감소**: 데이터가 리프 노드에만 저장되므로 트리의 깊이가 얕아질 수 있으며, 이는 검색 속도를 높이는데 기여
#### 작동 방식
* 탐색 과정에서 B-트리와 비슷하지만 최종적으로 리프 노드에 도달해야만 실제 데이터를 읽어올 수 있다.
* 삽입과 삭제 시에도 리프노드에서만 데이터가 추가되거나 제거된다. 트리의 균형을 맞추기 위해 노드를 분할하거나 병합하는 작업 수행
### 3. 해시 테이블 구조
* 키-값 쌍을 기반으로 동작하는 자료 구조로, 주로 **정확한 값 검색**에 적합한 구조
#### 특징:
* **빠른 검색 속도**: 검색시 O(1)의 시간 복잡도를 가지므로 매우 빠르다.
* **해시 함수 사용**: 데이터베이스 시스템에서 해시 함수를 사용하여 특정 키에 대한 고유한 인덱스를 생성한다.
* **범위 검색에는 부적합**: 해시 인덱스는 특정 값을 찾는데는 매우 효율적이지만, 범위 검색이나 순차적 데이터 탐색에는 적합하지 않다.



## 인덱스 사용 고려사항
1. 조회 빈도 높은 컬럼에 사용: 자주 조회되는 컬럼에 인덱스를 사용하여, 조회 성능을 향상 시켜라
2. 적절한 인덱스 수: 너무 많은 인덱스를 생성하면, 성능에 저하가 생길 수 있다.
3. 쿼리 패턴 분석: 쿼리의 실행 계획을 분석하여 인덱스가 실제로 쿼리 성능을 개선시키는지 확인해야된다.
4. 배치 삽입 사용: 많은 데이터를 삽입할 때 배치 삽입을 사용하여 인덱스 업데이트 오버헤드를 줄일 수 있다.
