---
title: Sub Typing
slug: "sub-typing"
---
## 개요

프로그래밍 언어 이론에서 서브타이핑(Subtyping)은 타입 다형성(Type Polymorphism)의 한 형태이다. 특히 객체지향 프로그래밍(Object-Oriented Programming, OOP)에서는 다형성(Polymorphism)의 주요 구현 방식 중 하나이며, 리스코프 치환 원칙(Liskov Substitution Principle)과 밀접하게 관련된다.

서브타입은 슈퍼타입이 기대되는 자리에 안전하게 대입될 수 있는 타입을 의미한다. 즉, 어떤 함수나 연산이 슈퍼타입을 인자로 기대할 때, 서브타입도 동일한 방식으로 사용될 수 있어야 한다. 이러한 속성은 치환 가능성(Substitutability)이라는 개념으로 설명된다.

---

## 상속과의 구분

서브타이핑은 종종 상속과 혼동되지만, 두 개념은 본질적으로 다르다.

| 개념 구분                 | 설명                                | 관련 용어         |
| --------------------- | --------------------------------- | ------------- |
| **상속 (Inheritance)**| 클래스 간**구현 재사용**을 위한 개념           | 슈퍼클래스 / 서브클래스 |
| **서브타이핑 (Subtyping)**|**타입 간 호환성**또는**치환 가능성** 중심의 개념 | 슈퍼타입 / 서브타입   |

Java나 C++ 같은 명목 타입 언어에서는 `interface`나 `class`를 상속할 때 자동으로 서브타이핑 관계도 형성된다. 인터페이스 상속은 서브타이핑을 명시적으로 설계하는 방식이고, 클래스 상속은 구현 공유와 동시에 타입 호환성을 제공할 수 있다.

---

## 서브섬션 (Subsumption)

* 타입 이론에서 **서브섬션(Subsumption)**은 한 타입이 더**일반적인지** 를 설명하기 위한 개념이다.
* `T`가 `S`를 서브섬한다면 (`S <: T`), 이는 **`S`**의 모든 값이**`T`** 의 값 집합에 포함된다는 의미다.
* 이는 서브타이핑 관계를 **수학적으로 정당화** 하는 데 사용되며, 집합 이론의 부분집합 관계(`S ⊆ T`)에 기반한다.
* 예시: 동물 분류 체계에서 `Felis <: Felinae <: Felidae`와 같은 계층 구조는 구체적 타입이 더 일반적 타입에 포함된다는 서브섬션 관계를 보여준다.

---

## 함수 타입의 서브타이핑

* 함수 타입 `T1 → T2`에 대해, `S1 → S2`가 그 서브타입이 되기 위한 조건:

  * `T1 <: S1` → **입력 타입은 더 일반적이어야 함** (**반공변성**)
  * `S2 <: T2` → **출력 타입은 더 구체적이어야 함** (**공변성**)

즉, 더 많은 입력을 받아들이고 더 구체적인 결과를 반환하는 함수가 더 구체적인 함수로 간주되어 서브타입이 된다.

**예시:**

* `Animal → Dog`는 `Dog → Animal`보다 더 구체적인 반환값을 가지므로 서브타입이 될 수 있다.

**코드 예시:**

```java
class Animal {}
class Dog extends Animal {}

interface Func1 {
    Dog apply(Animal a); // Animal → Dog
}

interface Func2 {
    Animal apply(Dog d); // Dog → Animal
}
```

`Func1`은 `Func2`의 위치에 사용할 수 있다. 입력 타입이 더 일반적이고 반환 타입이 더 구체적이므로 `Func1 <: Func2` 관계가 성립한다.

---

## 레코드 타입의 서브타이핑

레코드는 필드 집합으로 구성된 타입이며, 다음 두 방식으로 서브타이핑이 정의된다:

* **폭 서브타이핑 (Width Subtyping)**: 기존 필드에 **새로운 필드를 추가**하면 서브타입이 된다.
  예: `{x: Int, y: Int}`는 `{x: Int}`의 서브타입

* **깊이 서브타이핑 (Depth Subtyping)**: 필드의 타입을 **더 구체적인 타입으로 대체**하면 서브타입이 된다.
  예: `{x: Dog}`는 `{x: Animal}`의 서브타입 (단, `Dog <: Animal`일 때)

레코드 서브타이핑은 함수형 언어의 레코드 시스템이나 객체지향 언어의 필드 기반 객체 시스템에서 널리 사용된다.

---

## 서브타이핑 체계의 분류

서브타이핑은 다음과 같은 기준으로 분류할 수 있다:

* **명목적 서브타이핑 (Nominal Subtyping)**: 타입 선언을 통해 서브타이핑 관계를 명시 (예: Java의 `interface`, `extends`, `implements`)
* **구조적 서브타이핑 (Structural Subtyping)**: 두 타입의 구조가 동일하면 관계가 자동으로 성립 (예: TypeScript, Go, Python)
* **포괄적 서브타이핑 (Inclusive Subtyping)**: 메모리 표현이 같아 변환 없이 대체 가능 (예: C++의 클래스 포인터 상속)
* **강제적 서브타이핑 (Coercive Subtyping)**: 타입 간 암시적 변환(coercion)을 통해 관계 성립 (예: 정수 → 실수 자동 형변환)

---

