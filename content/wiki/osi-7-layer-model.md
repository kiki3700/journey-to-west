---
title: OSI 7 계층 모델
slug: "osi-7-layer-model"
---

## 개요

- 네트워크 통신의 표준 모델로 통신시 벌어지는 일들을 체계적으로 이해하고 설명하는데 많은 도움이 된다.
- OSI(Open systems interconnection model) 는 ISO에서 개발한 네트워크 통신의 표준 모델로, 네트워크 통신을 7개의 계층으로 나누어 각 계층이 수행하는 역할과 기능을 명확히 정의한다.
- 각 계층은 특정 기능을 담당하며 상호작용하면서 전체 통신 과정을 완성한다.

## 모델의 목적과 사용

- 이해의 용의성 제공 : 네트워크 통신 과정을 계층으로 나눠 각 단계에서 어떤 일이 일어나는지 쉽게 이해할수 있다.
- 표준화 : 서로 다른 시스템 간의 상호 운용성을 보장하기 위한 표준을 제공하여, 네트워크 기술과 프로토콜의 개발을 촉진
- 문제 해결 : 네트워크 문제를 특정 계층으로 구분하여 문제를 더 쉽게 진단하고 해결할 수 있다.

## OSI 7 계층

1. 물리 계층 (Physical Layer)
   - 역할: 비트 송수신, 물리적 매체를 통해 신호 전달.
   - 기능: 네트워크 통신이 상대방에게 도착하여 처리되는 마지막 단계.
   - 예: 케이블, 네트워크 카드, 리피터.
2. 데이터 링크 계층 (Data Link Layer)
   - 역할: MAC 주소를 사용해 송수신, 프레임 생성 및 전송.
   - 기능: 로컬 네트워크에서 통신이 스위칭되는 과정을 설명. 프레임의 오류 검출 및 수정.
   - 예: 스위치, 브리지, MAC 주소.
3. 네트워크 계층 (Network Layer)
   - 역할: 패킷으로 데이터 캡슐화, 라우팅, IP 주소를 사용해 데이터를 전송.
   - 기능: 서로 다른 네트워크에서 통신 상대편과 통신하기 위해, IP 주소를 사용하여 목적지를 정하고, 패킷으로 데이터를 캡슐화하고, 이를 라우팅하여 운송하는 단계.
   - 예: 라우터, IP 프로토콜.
4. 전송 계층 (Transport Layer)

   - 역할: 데이터를 캡슐화하여 전송, 신뢰성 보장.
   - 기능: 신뢰성 있게 데이터를 전송하기 위해, 프로토콜을 정의하고, 그 프로토콜이 어떻게 데이터를 캡슐화하고 신뢰성을 보장하는지 설명하는 단계.
   - 예: TCP, UDP.

5. 세션 계층 (Session Layer)
   - 역할: 통신의 연결을 논리적으로 관리 (연결, 유지, 종료).
   - 기능: 통신의 연결을 어떻게 설정하고, 유지하며, 종료하는지 설명하는 계층.
   - 예: NetBIOS, RPC.
6. 표현 계층 (Presentation Layer)
   - 역할: 데이터 형식 변환, 암호화, 압축.
   - 기능: 서로 다른 시스템 간의 데이터 교환을 위해 데이터 형식을 변환하고, 암호화 및 압축을 수행.
   - 예: JPEG, SSL/TLS.
7. 응용 계층 (Application Layer)
   - 역할: 네트워크 서비스 제공.
   - 기능: 사용자와 직접 상호작용하는 네트워크 애플리케이션과 서비스 제공.
   - 예: HTTP, FTP, SMTP, DNS.

## HTTP 통신시 각 계층별 역할과 동작

### 1. 응용계층 (Application layer)

- 역할 : 사용자와 직접 상요작용 하는 네트워크 애플리케이션과 서비스 제공
- 예시 :
  - 사용자가 웹 브라우저에 URL http://www.example.com 을 입력하고 엔터를 누른다.
  - 웹 브라우저는 HTTP GET 요청을 생성한다.
  ```vbnet
  GET /index.htmp HTTP/1.1
  Host: www.example.com
  ```

### 2. 표현계층(Presentation Layer)

- 역할 : 데이터 형식 변환, 인코딩/디코딩, (https의 경우) 암호화/복호화
- 예시 :
  - HTTP 요청이 텍스트 형식으로 변환된다.(ex: UTF-8인코딩)
  - HTTPS의 경우, 데이터가 암호화 된다.

### 3. 세션계층(Session layer)

- 역할 : 상태가 없는 HTTP 프로토콜은 세션계층을 사용하여 연결을 정립하지 않는다.

### 4. 전송 계층(Transport Layer)

- 역할 : 데이터를 캡슐화하여 전송, 신뢰성 보장
- 예시 :
  #### TCP 연결 설정
  - 클라이언트와 서버는 TCP 3-way 핸드 셰이크를 통해 신뢰성 있는 연결을 설정한다.
  - 과정
    - SYN(Synchronize): 클라이언트가 서버에 연결을 요청하는 SYN 패킷을 보낸다.
    ```aduino
    # 클라이언트가 서버에 자신이 연결을 요청하고 있음을 알린다.
    client -> Server: SYN (seq-x) # 클라이언트의 초기 시퀸스 번호를 포함한다.
    ```
    - SYN-ACK (Synchronize-Acknowledge) : 서버가 클라이언트의 요청을 수락하고 응답하는 SYN-ACK 패킷을 보낸다.
    ```aduino
    # 클라이언트의 요청을 수락했으며, 클라이언트의 시퀸스번호를 확인 했음을 알린다.
    # seq 는 서버의 초기 시퀸스 번호이다.
    Server -> Client: SYN-ACK (seq=y, ack=x+1)
    ```
    - ACK(Acknowledge): 클라이언트가 서버의 응답을 확인하고 ACK 패킷을 보낸다.
    ```aduino
    # 클라이언트가 서버의 응답을 확인했으며 서버왕의 연결이 준비되었음을 알린다.
    Client -> Server: ACK (ack=y+1)
    ```
  - 신뢰성 보장의 이유
    - 양방향 동의 확인 : 서로의존재를 인식하고 통신을 시작할 준비가 되었음을 확인
    - 시퀸스 번호를 통한 데이터 무결성: 시퀸스 번호는 전송되는 데이터의 순서르 추ㅊ적하는데 사용되어, 데이터가 손실되거나, 중복되지 않고 ,올바른 순서로 도착하도록 보장
    - 오류 검출 및 재전송: 핸드 쉐이크 과정에서 패킷이 손실되거나 손상되면, 일정시간 동안 기다린뒤 재전송, 네트워크에서 발생할 수 있는 일시적인 문제를 극복하고, 신뢰성있는 연결을 보장
    - 연결설정완료 확인: ACK패킷을 통해 연결 설정이 완료된 이후 데이터 전송을 시작
  #### 데이터전송
  - 연결이 설정된 후, HTTP 요청 데이터는 TCP 세그먼트로 캡슐화 되어 전송, 응답을 수신받으면 데이터 전송 완료
    - e데이터: 클라이언트와 서버는 데이터 전송 중 오류 검출 및 수정을 통해 신뢰성을 보장
  #### 연결 종료 (TCP 4 way 핸드 세이크)
  - 데이터 전송이 완료되면 , 클라이언트와 서버는 연결을 종료한다.
  - 연결과 달리 4way 로 진행되는 이유는 양방향의 데이터 전송이 독립적으로 종료되기 때문이다.
    - FIN(Finish): 클라이언트가 연결 종료를 요청하는 FIN 패킷을 보낸다.
    ```adunio
    Client -> Server: FIN
    ```
    - ACK: 서버가 FIN 패킷을 확인하고 ACK 패킷을 보낸다
    ```aduino
    Server -> Client: ACK
    ```
    - FIN: 서버도 연결 종료를 요청하는 FIN 패킷을 보낸다.
    ```adunio
    Server -> Client: FIN
    ```
    - ACK: 클라이언트가 FIN 패킷을 확인하고 ACK 패킷을 보낸다.
    ```aduino
    Client -> Server: ACK
    ```

### 5. 네트워크 계층 (Network Layer)

- 역할: 패킷으로 데이터 캡슐화, 라우팅, IP 주소를 사용해 데이터를 전송
- 에시:
  - Tcp 세그먼트가 IP 패킷으로 캡슐화 된다.
  - IP 주소를 사용하여 데이터를 라우팅하게된다.
  - 라우팅 과정:
    - 데이터는 출발지 IP주소와 목적지 IP주소를 사용하여 네트워크에서 최적의 경로로 전달
    - 라우터는 IP 패킷을 수신하고, 라우팅 테이블을 참조하여 Next Hop을 결정하고, 패킷을 전달한다.

### 6. 데이터링크 계층(Data Link Layer)

- 역할:프레임 생성 및 전송, MAC주소를 사용해 데이터 송수진
- 예시
  - IP패킷은 이더넷 프레임으로 캡슐화된다.
  - 클라이언트의 네트워크 인터페이스 카드(NIC)에서 출발지 MAC 주소와 목적지 MAC주소를 설정한다.
  ```mathematica
  출발지 MAC: 00:1A:2B:3C:4D:5E
  목적지 MAC: 00:1F:2E:3D:4C:5B
  ```
  - MAC 주소와 IP 주소의 차이
    - MAC주소: 네트워크 인터페이스 카드에 할당된 고유 식별자. 로컬 ㅔ트워크에서 데이터 링크 계층을 통해 장치간의 통신을 관리
    - IP 주소: 네트워크상의 장치를 식별하는 주소. 네트워크 계층을 통해 인터넷과 같은 광범위한 네트워크에서 라우팅 및 통신을 관리.

### 6. 물리 계층(Physical Layer)

- 역할: 비트 송수신, 물리적 매체를 통해 신호 전달
- 예시:
  - 이더넷 프레임은 물리적 매체(예: 구리선, 광섬유, 무선신호)를 통해 전송
  - 네트워크 케이블을 통해 전기 신호 또는 광 신호로 변환되어 전송.
